{
  "terrarium_id": "terrarium_esp32_template",
  "name": "Template Terrarium ESP32",
  "description": "Configuration template pour terrariums contrôlés par ESP32",
  "version": "1.0",
  "created_date": "2024-01-01",
  "last_updated": "2024-01-01",
  "active": false,
  "controller_type": "esp32",
  "role": "terrarium_controller",
  "central_supervisor": "terrarium_default",
  "communication": {
    "protocol": "wifi",
    "mqtt_broker": "raspberry_pi_local",
    "mqtt_port": 1883,
    "update_interval": 30,
    "heartbeat_interval": 60,
    "reconnect_attempts": 3
  },
  "hardware_configuration": {
    "sensors": {
      "temperature_humidity": {
        "enabled": true,
        "sensor_type": "dht22",
        "gpio_pin": 4,
        "calibration": {
          "temperature_offset": 0.0,
          "humidity_offset": 0.0
        }
      },
      "air_quality": {
        "enabled": true,
        "sensor_type": "generic",
        "gpio_pin": 5,
        "calibration": {
          "baseline": 50,
          "sensitivity": 1.0
        }
      },
      "water_level": {
        "enabled": true,
        "sensor_type": "tenflyer",
        "gpio_pin": 21,
        "calibration": {
          "empty_level": 0,
          "full_level": 100
        }
      }
    },
    "actuators": {
      "lighting": {
        "enabled": true,
        "pwm_pin": 12,
        "pwm_frequency": 1000,
        "max_brightness": 100,
        "fade_enabled": true
      },
      "heater": {
        "enabled": true,
        "relay_pin": 19,
        "safety_temperature": 35.0,
        "hysteresis": 1.0
      },
      "humidifier": {
        "enabled": true,
        "relay_pin": 5,
        "min_cycle_time": 300,
        "max_cycle_time": 1800
      },
      "fan": {
        "enabled": true,
        "pwm_pin": 13,
        "pwm_frequency": 1000,
        "min_speed": 20,
        "max_speed": 100
      },
      "feeder_servo": {
        "enabled": true,
        "pwm_pin": 18,
        "servo_frequency": 50,
        "servo_angle_closed": 0,
        "servo_angle_open": 90
      }
    },
    "ui": {
      "status_led": {
        "enabled": true,
        "gpio_pin": 2,
        "blink_patterns": {
          "normal": "solid",
          "warning": "slow_blink",
          "error": "fast_blink",
          "offline": "double_blink"
        }
      }
    },
    "safety": {
      "emergency_stop": {
        "enabled": true,
        "gpio_pin": 0,
        "pull_up": true
      },
      "watchdog": {
        "enabled": true,
        "timeout_seconds": 300
      }
    }
  },
  "environmental_settings": {
    "temperature": {
      "day_target": 25.0,
      "night_target": 20.0,
      "tolerance": 2.0,
      "hysteresis": 1.0,
      "unit": "celsius"
    },
    "humidity": {
      "target": 60.0,
      "tolerance": 5.0,
      "hysteresis": 3.0,
      "unit": "percent"
    },
    "lighting": {
      "photoperiod": {
        "day_start": "08:00",
        "day_end": "20:00"
      },
      "intensity": {
        "min": 20,
        "max": 80,
        "default": 60
      },
      "fade": {
        "enabled": true,
        "sunrise_duration": 30,
        "sunset_duration": 30
      }
    },
    "ventilation": {
      "base_speed": 30,
      "max_speed": 80,
      "air_quality_threshold": 100
    }
  },
  "feeding_schedule": {
    "enabled": true,
    "frequency": "daily",
    "times": ["09:00", "18:00"],
    "portion_size": "medium",
    "safety_checks": {
      "water_level_min": 20,
      "temperature_range": [15, 35],
      "humidity_range": [20, 95]
    }
  },
  "monitoring": {
    "data_logging": {
      "enabled": true,
      "temperature_interval": 60,
      "humidity_interval": 60,
      "air_quality_interval": 120,
      "local_storage": true,
      "sync_to_central": true
    },
    "alerts": {
      "enabled": true,
      "temperature_alerts": true,
      "humidity_alerts": true,
      "air_quality_alerts": true,
      "feeding_alerts": true,
      "communication_alerts": true
    }
  },
  "safety_limits": {
    "temperature": {
      "min": 10.0,
      "max": 40.0,
      "critical_min": 5.0,
      "critical_max": 45.0
    },
    "humidity": {
      "min": 20.0,
      "max": 90.0,
      "critical_min": 10.0,
      "critical_max": 95.0
    },
    "air_quality": {
      "critical_threshold": 300
    },
    "water_level": {
      "critical_min": 15.0
    }
  },
  "esp32_specific": {
    "wifi": {
      "ssid": "Alimante_Network",
      "password": "alimante2024",
      "auto_reconnect": true,
      "reconnect_attempts": 3
    },
    "mqtt": {
      "client_id": "terrarium_esp32",
      "topics": {
        "sensor_data": "terrariums/{terrarium_id}/sensors",
        "actuator_status": "terrariums/{terrarium_id}/actuators",
        "commands": "terrariums/{terrarium_id}/commands",
        "heartbeat": "terrariums/{terrarium_id}/heartbeat"
      }
    },
    "power_management": {
      "deep_sleep": false,
      "cpu_frequency": 240,
      "wifi_power_save": true
    },
    "ota_update": {
      "enabled": true,
      "update_server": "raspberry_pi_local",
      "update_port": 8080
    }
  }
}
