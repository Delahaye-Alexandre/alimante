alimante/
â”œâ”€â”€ config/
â”‚ â”œâ”€â”€ config.json
â”‚ â”œâ”€â”€ gpio_config.json
â”‚ â”œâ”€â”€ network.json
â”‚ â”œâ”€â”€ logging.yaml
â”‚ â”œâ”€â”€ safety_limits.json
â”‚ â”œâ”€â”€ policies/
â”‚ â”‚ â”œâ”€â”€ lighting_policy.json
â”‚ â”‚ â”œâ”€â”€ humidity_policy.json
â”‚ â”‚ â”œâ”€â”€ ventilation_policy.json
â”‚ â”‚ â””â”€â”€ feeding_policy.json
â”‚ â”œâ”€â”€ species/
â”‚ â”‚ â”œâ”€â”€ insects/
â”‚ â”‚ â”‚ â”œâ”€â”€ mantis_religiosa.json
â”‚ â”‚ â”‚ â””â”€â”€ \_template_insect.json
â”‚ â”‚ â””â”€â”€ reptiles/
â”‚ â”‚ â””â”€â”€ \_template_reptile.json
â”‚ â””â”€â”€ terrariums/
â”‚ â”œâ”€â”€ terrarium_default.json
â”‚ â””â”€â”€ terrarium_02.json
â”‚
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ api/
â”‚ â”‚ â”œâ”€â”€ **init**.py
â”‚ â”‚ â”œâ”€â”€ server.py
â”‚ â”‚ â”œâ”€â”€ routes/
â”‚ â”‚ â”‚ â”œâ”€â”€ metrics.py
â”‚ â”‚ â”‚ â”œâ”€â”€ control.py
â”‚ â”‚ â”‚ â”œâ”€â”€ profiles.py
â”‚ â”‚ â”‚ â”œâ”€â”€ camera.py
â”‚ â”‚ â”‚ â””â”€â”€ auth.py
â”‚ â”‚ â””â”€â”€ schemas.py
â”‚ â”œâ”€â”€ controllers/
â”‚ â”‚ â”œâ”€â”€ **init**.py
â”‚ â”‚ â”œâ”€â”€ base_controller.py
â”‚ â”‚ â”œâ”€â”€ drivers/
â”‚ â”‚ â”‚ â”œâ”€â”€ mosfet_driver.py
â”‚ â”‚ â”‚ â”œâ”€â”€ pwm_driver.py
â”‚ â”‚ â”‚ â”œâ”€â”€ servo_driver.py
â”‚ â”‚ â”‚ â”œâ”€â”€ i2c_lcd_driver.py
â”‚ â”‚ â”‚ â”œâ”€â”€ rotary_encoder_driver.py
â”‚ â”‚ â”‚ â””â”€â”€ camera_driver.py
â”‚ â”‚ â”œâ”€â”€ sensors/
â”‚ â”‚ â”‚ â”œâ”€â”€ dht22_sensor.py
â”‚ â”‚ â”‚ â”œâ”€â”€ tenflyer_water_sensor.py
â”‚ â”‚ â”‚ â””â”€â”€ optional/
â”‚ â”‚ â”‚ â”œâ”€â”€ ultrasonic_level.py
â”‚ â”‚ â”‚ â””â”€â”€ capacitive_level.py
â”‚ â”‚ â”œâ”€â”€ actuators/
â”‚ â”‚ â”‚ â”œâ”€â”€ lighting_controller.py
â”‚ â”‚ â”‚ â”œâ”€â”€ heater_controller.py
â”‚ â”‚ â”‚ â”œâ”€â”€ humidifier_controller.py
â”‚ â”‚ â”‚ â”œâ”€â”€ fan_controller.py
â”‚ â”‚ â”‚ â”œâ”€â”€ feeder_sas_controller.py
â”‚ â”‚ â”‚ â”œâ”€â”€ lcd_controller.py
â”‚ â”‚ â”‚ â””â”€â”€ encoder_controller.py
â”‚ â”‚ â””â”€â”€ misc/
â”‚ â”‚ â”œâ”€â”€ relay_controller.py
â”‚ â”‚ â””â”€â”€ power_cutoff_hw.py
â”‚ â”œâ”€â”€ services/
â”‚ â”‚ â”œâ”€â”€ **init**.py
â”‚ â”‚ â”œâ”€â”€ sensor_service.py
â”‚ â”‚ â”œâ”€â”€ monitoring_service.py
â”‚ â”‚ â”œâ”€â”€ control_service.py
â”‚ â”‚ â”œâ”€â”€ ventilation_service.py
â”‚ â”‚ â”œâ”€â”€ humidification_service.py
â”‚ â”‚ â”œâ”€â”€ heating_service.py
â”‚ â”‚ â”œâ”€â”€ lighting_service.py
â”‚ â”‚ â”œâ”€â”€ feeding_service.py
â”‚ â”‚ â”œâ”€â”€ ui_service.py
â”‚ â”‚ â”œâ”€â”€ camera_service.py
â”‚ â”‚ â”œâ”€â”€ species_service.py
â”‚ â”‚ â”œâ”€â”€ scheduler_service.py
â”‚ â”‚ â”œâ”€â”€ persistence_service.py
â”‚ â”‚ â”œâ”€â”€ sync_service.py
â”‚ â”‚ â””â”€â”€ safety_service.py
â”‚ â”œâ”€â”€ ui/
â”‚ â”‚ â”œâ”€â”€ pwa/
â”‚ â”‚ â”‚ â”œâ”€â”€ src/
â”‚ â”‚ â”‚ â””â”€â”€ manifest.json
â”‚ â”‚ â””â”€â”€ lcd_screens/
â”‚ â”‚ â”œâ”€â”€ dashboard_screen.py
â”‚ â”‚ â””â”€â”€ menu_controller.py
â”‚ â”œâ”€â”€ loops/
â”‚ â”‚ â”œâ”€â”€ main_loop.py
â”‚ â”‚ â””â”€â”€ watchdog.py
â”‚ â””â”€â”€ utils/
â”‚ â”œâ”€â”€ event_bus.py
â”‚ â”œâ”€â”€ pid.py
â”‚ â”œâ”€â”€ calibration.py
â”‚ â””â”€â”€ time_utils.py
â”‚
â”œâ”€â”€ data/
â”‚ â”œâ”€â”€ db.sqlite
â”‚ â””â”€â”€ snapshots/
â”‚
â”œâ”€â”€ docs/
â”‚ â”œâ”€â”€ architecture.md
â”‚ â”œâ”€â”€ wiring/
â”‚ â”œâ”€â”€ tenflyer_integration.md
â”‚ â””â”€â”€ species_profile_format.md
â”‚
â”œâ”€â”€ scripts/
â”‚ â”œâ”€â”€ install_raspberry.sh
â”‚ â”œâ”€â”€ start_all.sh
â”‚
â”œâ”€â”€ tests/
â”‚ â”œâ”€â”€ unit/
â”‚ â””â”€â”€ integration/
â”‚
â”œâ”€â”€ main.py
â””â”€â”€ README.md

Plan de dÃ©veloppement supervisÃ© pour Cursor (Windows â†’ Raspberry Pi)
Description du projet

Alimante est une application Python pour gÃ©rer automatiquement des terrariums pour insectes et reptiles.
Elle doit superviser et contrÃ´lerâ€¯:

TempÃ©rature (jour/nuit, selon profil espÃ¨ce)

HumiditÃ© et niveau dâ€™eau

LumiÃ¨re (photopÃ©riode, transitions douces)

Ventilation (vitesse des ventilateurs selon qualitÃ© de l'air)

Alimentation automatique (via SAS et servo)

CamÃ©ras et interface utilisateur (LCD + PWA)

Le systÃ¨me sâ€™adapte en fonction de lâ€™espÃ¨ceâ€¯: chaque espÃ¨ce a un profil dÃ©fini dans config/species/, qui fixe ses besoins en tempÃ©rature, humiditÃ©, lumiÃ¨re et frÃ©quence de nourrissage.

Lâ€™architecture est modulaireâ€¯:

Driversâ€¯: interaction directe avec le matÃ©riel (GPIO, I2C, PWMâ€¦).

Controllersâ€¯: traduisent les dÃ©cisions des services en commandes matÃ©rielles.

Servicesâ€¯: logique mÃ©tier et supervision, adapte les consignes selon les profils espÃ¨ces.

UI / Loops / Utilsâ€¯: interface utilisateur et boucle principale de supervision.

DÃ©veloppement sur Windowsâ€¯: tout le code et la structure sont crÃ©Ã©s sur Windows, puis transfÃ©rÃ©s sur le Raspberry Pi.

Ordre de dÃ©veloppement prioritaire

Cursor doit suivre cet ordre sÃ©quentiel, en te laissant superviser chaque Ã©tapeâ€¯:

1ï¸âƒ£ PrÃ©parer la structure du projet

Butâ€¯: crÃ©er tous les dossiers et fichiers de base selon lâ€™arbre alimante/.

Actionsâ€¯:

VÃ©rifier que tous les dossiers (config/, src/, data/, docs/, scripts/, tests/) existent

VÃ©rifier les fichiers principaux (main.py, README.md)

Supervisionâ€¯: tu valides la structure et lâ€™organisation globale.

2ï¸âƒ£ Configurations initiales

Butâ€¯: prÃ©parer tous les fichiers de configuration.

Actionsâ€¯:

config/config.json â†’ paramÃ¨tres globaux

gpio_config.json â†’ mapping des pins (pour le futur sur Raspberry)

network.json â†’ accÃ¨s distant (optionnel)

safety_limits.json â†’ limites de sÃ©curitÃ© (TÂ°, HR, air_quality, water_level)

policies/ â†’ rÃ¨gles dâ€™automatisation (lumiÃ¨re, humiditÃ©, ventilation, nourrissage)

species/ â†’ profils espÃ¨ces (insectes et reptiles), fichiers template

terrariums/ â†’ instances de terrarium, association Ã  lâ€™espÃ¨ce

Supervisionâ€¯: tu vÃ©rifies les fichiers JSON, formats et valeurs par dÃ©faut.

3ï¸âƒ£ DÃ©veloppement des drivers

Butâ€¯: assurer que chaque composant matÃ©riel pourra Ãªtre utilisÃ©.

PrioritÃ©â€¯:

Capteursâ€¯: dht22_sensor.py, air_quality_sensor.py, tenflyer_water_sensor.py

Actionneursâ€¯: mosfet_driver.py, servo_driver.py, pwm_driver.py

PÃ©riphÃ©riquesâ€¯: i2c_lcd_driver.py, rotary_encoder_driver.py, camera_driver.py

Supervisionâ€¯: valider les tests hardware simulÃ©s ou rÃ©els sur Raspberry Pi aprÃ¨s transfert.

4ï¸âƒ£ DÃ©veloppement des controllers

Butâ€¯: transformer les commandes des services en actions concrÃ¨tes via les drivers.

PrioritÃ©â€¯:

lighting_controller.py

heater_controller.py

humidifier_controller.py

fan_controller.py

feeder_sas_controller.py

lcd_controller.py et encoder_controller.py

Supervisionâ€¯: tu valides que chaque controller applique correctement les ordres au driver.

5ï¸âƒ£ DÃ©veloppement des services

Butâ€¯: crÃ©er la logique mÃ©tier et lâ€™adaptation aux espÃ¨ces.

PrioritÃ©â€¯:

sensor_service.py â†’ lecture harmonisÃ©e des capteurs

control_service.py â†’ dÃ©cisions globales (PID, On/Off)

Services spÃ©cifiquesâ€¯: heating_service.py, ventilation_service.py, humidification_service.py, lighting_service.py â†’ ajustÃ©s selon profil espÃ¨ce

feeding_service.py â†’ planification et dÃ©clenchement du nourrissage selon espÃ¨ce

ui_service.py â†’ LCD + encodeur

camera_service.py â†’ snapshots / streaming

scheduler_service.py â†’ tÃ¢ches planifiÃ©es

persistence_service.py â†’ stockage SQLite

sync_service.py â†’ cloud/tunnel (optionnel)

safety_service.py â†’ failsafes matÃ©riels et logiciels

Supervisionâ€¯: tu valides chaque dÃ©cision du service selon les profils espÃ¨ces avant de passer Ã  la suite.

6ï¸âƒ£ DÃ©veloppement de lâ€™interface utilisateur

Butâ€¯: interaction avec lâ€™utilisateur.

Actionsâ€¯:

LCD local (dashboard_screen.py, menu_controller.py)

PWA / web dashboard (pwa/src/)

Supervisionâ€¯: tester chaque Ã©cran et menu.

7ï¸âƒ£ Boucles principales et utilitaires

Butâ€¯: orchestrer le fonctionnement continu.

Actionsâ€¯:

main_loop.py â†’ boucle principale sensors â†’ services â†’ actuators

watchdog.py â†’ redÃ©marrage services bloquÃ©s

utils/ â†’ PID, calibration, event bus, fonctions temps

Supervisionâ€¯: valider le comportement continu sur Raspberry Pi.

8ï¸âƒ£ Tests et validation

Butâ€¯: sâ€™assurer que tout fonctionne correctement.

Actionsâ€¯:

Tests unitaires (tests/unit)

Tests dâ€™intÃ©gration (tests/integration)

Validation finale sur Raspberry Pi avec matÃ©riel rÃ©el

Supervisionâ€¯: tu valides que le systÃ¨me respecte les limites et profils espÃ¨ces.

9ï¸âƒ£ Documentation

Butâ€¯: rendre le projet maintenable et comprÃ©hensible.

Actionsâ€¯:

docs/architecture.md

docs/wiring/

docs/species_profile_format.md

Supervisionâ€¯: tu valides la clartÃ© et la complÃ©tude de la documentation.

ğŸ’¡ RÃ¨gles pour Cursor

Suivre cet ordre de dÃ©veloppement strict.

Te laisser superviser chaque Ã©tape.

VÃ©rifier chaque dÃ©cision, code et test avant de passer Ã  la suivante.

Adapter automatiquement la logique des services aux profils des espÃ¨ces.